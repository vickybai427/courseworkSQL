CREATE TABLE BOOKS_HISTORY
(
ID NUMBER PRIMAR KEY,
ISBN VARCHAR2(20),
TITLE VARCHAR2(100),
CATEGORY VARCHAR2(50),
MOD_TYPE VARCHAR2(10),
MOD_DATE DATE
);

CREATE SEQUENCE BOOKS_HISTORY_SEQ
START WITH1;

INSERT INTO BOOKS_HISTORY VALUES(BOOKS_HISTORY_SEQ.NEXTVAL,
'0401140733', 'REVENGE OF MICKEU', 'CHILDREN', 'U', SYSDATE);

UPDATE BOOKS SET TITLE = TITLE || 'TEST'
WHERE ISBN='0401140733';
SELECT ISBN, TITLE FROM BOOKS;

CREATE OR REPLACE TRIGGER BOOKS_HISTORY_TRG
BEFORE INSERT OR UPDATE OR DELETE ON BOOKS
FOR EACH ROW
BEGIN
	IF INSERTING THEN
		INSERT INTO BOOKS_HISTORY VALUES(BOOKS_HISTORY_SEQ.NEXTVAL,
		:NEW.ISBN, :NEW.TITLE, 
		:NEW.CATEGORY, 'I', SYSDATE);
	ELSIF DELETING THEN
		INSERT INTO BOOKS_HISTORY VALUES(BOOKS_HISTORY_SEQ.NEXTVAL,
		:OLD.ISBN, :OLD.TITLE, 
		:OLD.CATEGORY, 'I', SYSDATE);
	ELSIF UPDATING THEN
		INSERT INTO BOOKS_HISTORY VALUES(BOOKS_HISTORY_SEQ.NEXTVAL,
		:OLD.ISBN, :OLD.TITLE, 
		:OLD.CATEGORY, 'I', SYSDATE);
	END IF;
END;
/

INSERT INTO BOOKS(ISGN,TITLE,CATEGORY)
VALUES('12345678','TEST BOOK', 'TEST');























